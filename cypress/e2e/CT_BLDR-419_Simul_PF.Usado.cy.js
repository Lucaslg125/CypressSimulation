///<reference  types="cypress"/>
import 'cypress-xpath';
import { faker } from '@faker-js/faker';


describe('Caso de Teste - BLDR4 Pessoa Fisica Usado', () => {

  const el = require('../support/elements').ELEMENTS;
  const faker = require('faker-br');
  faker.locale = 'pt_BR';

  const name = faker.name.findName();
  const email = faker.internet.email();
  const phoneNumber = faker.phone.phoneNumber();
  var randomcpf = faker.br.cpf();
  var randomCnpj = faker.br.cnpj();

  it('CT Simulação Veiculo Usado', () => {

    cy.Login()
    cy.wait(3000)

    cy.MenuSimulacao()

    cy.get(el.VENDEDOR.TABELA_VENDEDOR, { timeout: 80000 }).trigger('mouseover').click()
    cy.get(el.VENDEDOR.CELULA_VENDEDOR).trigger('mousedown').click({ force: true })
    cy.get(el.VENDEDOR.SELECIONAR_VENDEDOR, { timeout: 80000 }).click({ force: true })
    cy.get(el.VENDEDOR.NOME_VENDEDOR).contains('Pafuncio Ferreira').click({ force: true })
    cy.get(el.VENDEDOR.SELECIONAR_VENDEDOR).should('contain', 'Pafuncio Ferreira')

    cy.get(el.MENU.BTN_SIMULACAO)
      .trigger('mouseover').should('to.visible').click()

    cy.get(el.CLIENTE.CAMPO_CPF).type(randomcpf)
    cy.get(el.CLIENTE.CAMPO_NOME).type(name).should('have.value', name)

    cy.get(el.CLIENTE.DTNASCIMENTO).type('10/01/1990').should('have.value', '10/01/1990')
      .type('{Esc}')

    cy.get(el.CLIENTE.CAMPO_TEL)
      .type('21997250105').should('have.value', '(21) 9 9725-0105')

    cy.get(el.CLIENTE.CAMPO_EMAIL).clear()
    cy.get(el.CLIENTE.CAMPO_EMAIL).type('lucasgoncalves.silva@actdigital.com').should('have.value', 'lucasgoncalves.silva@actdigital.com')
    cy.get(el.CLIENTE.CAMPO_EMAIL).should('contain.value', '@')

    cy.get(el.CLIENTE.CAMPO_CEP)
      .type('70713000')
      .type('{enter}')
    cy.get(el.CLIENTE.CAMPO_CEP).should('have.value', '70713-000')

    cy.wait(3000)
    cy.get(el.CLIENTE.BTN_CONTINUAR).should('to.visible')
      .click()
    cy.wait(3000)

    cy.get(el.VEICULO.TIPO_VENDA_USADO, { timeout: 80000 }).should('to.visible').click({ force: true })
    cy.wait(6000)

    cy.get(el.VEICULO_USADO.MARCA).trigger('mouseover').click({ force: true })
    cy.get('.mat-option-text').contains('RENAULT', { timeout: 80000 }).click({ force: true })
    cy.get(el.VEICULO_USADO.MARCA).should('contain', 'RENAULT')
    cy.wait(5000)

    cy.get(el.VEICULO.VEICULO_USADO).trigger('mouseover').click({ force: true })
    cy.get('.mat-option-text').contains(' Kwid ', { timeout: 80000 }).click({ force: true })
    cy.get(el.VEICULO.VEICULO_USADO).should('contain', 'Kwid')

    cy.get(el.VEICULO.CB_USADO_VERSAO).trigger('mouseover').click({ force: true })
    cy.get('.mat-option-text').contains('KWID OUTSIDER 1.0 Flex 12V 5p Mec.', { timeout: 80000 }).click({ force: true })
    cy.get(el.VEICULO.CB_USADO_VERSAO).should('contain', 'KWID OUTSIDER 1.0 Flex 12V 5p Mec.')

    cy.get(el.VEICULO.CB_USADO_FABR, { timeout: 80000 }).trigger('mouseover').click({ force: true })
    cy.get('.mat-option-text').contains(' 2021 ', { timeout: 80000 }).click({ force: true })
    cy.get(el.VEICULO.CB_USADO_FABR).should('contain', '2021')

    cy.get(el.VEICULO.VALOR_BASE_VEICULO, { timeout: 80000 })
      .type('49.990,00').should('have.value', 'R$ 49.990,00')

    cy.get(el.VEICULO.BTN_SIMULARVEICULO, { timeout: 80000 }).should('be.visible').click()
    cy.wait(2000)

    //Consentimento para Simulaçao
    cy.xpath(el.SIMULACAO.MENSG_CONSENTIMENTO_SIMUL, { timeout: 80000 }).should('be.visible').trigger('mouseover').click({ force: true })
    cy.get(el.SIMULACAO.CHECB_SIMUL_FINACIAMENTO, { timeout: 80000 }).should('be.visible').trigger('mouseover').click({ force: true })
    cy.get(el.SIMULACAO.BTN_CONTINUAR_SIMUL_FINACIAMENTO).contains('Continuar').click({ force: true })


    cy.wait(5000)


    cy.get(el.SIMULACAO.ENTRADA_CARD1, { timeout: 80000 }).should('be.visible').clear().type('70,00')
    cy.contains('label', 'Mensal').click()
    cy.wait(5000)

    cy.get(el.SIMULACAO.CARD_SIMU_1_LNK_CONTRATARSER, { timeout: 70000 }).should('be.visible').click()
    cy.wait(3000)

    //  cy.get(el.SIMULACAO.ENTRADA_CARD1, { timeout: 80000 }).should('be.visible').clear().type('70,00')  
    // cy.wait(2000)
    //  cy.contains('label', 'Mensal').click()

    //  cy.get(el.SIMULACAO.ENTRADA_CARD1, { timeout: 80000 }).should('have.value', '70,00%')
    //  cy.wait(2000)

    //   cy.get(el.SIMULACAO.CARD_SIMU_1_LNK_CONTRATARSER, { timeout: 70000 })
    //   .should('be.visible').click()

    //    cy.get(el.SIMULACAO.SERVICOS_E_SEGUROS, { timeout: 80000 }).should('be.visible').click()


    cy.get(el.SIMULACAO.CHECK_SEGURO_PROTECAO_FINANCEIRA).should('be.checked')
    cy.get(el.SIMULACAO.CHECK_SEGURO_TRANQUILIDADE, { timeout: 70000 }).click({ force: true })
    cy.get(el.SIMULACAO.CHECK_SEGURO_TRANQUILIDADE_TOTAL).should('be.checked')
    // cy.get(el.SIMULACAO.CHECK_SEMINOVO_GARANTIDO_COMPLETO).should('be.checked')
    cy.get(el.SIMULACAO.CHECK_SEMINOVO_GARANTIDO_COMPLETO, { timeout: 70000 }).click({ force: true })
    cy.get('#mat-select-35').click()
    cy.get('.mat-option-text').contains('12', { timeout: 80000 }).click({ force: true })
    cy.get(el.SIMULACAO.SEMINOVO_GARANTIDO_COMPLETO_KM).type('80.000', { force: true })
      .should('have.value', '80.000')

    cy.get('#mat-select-35').click()
    cy.get('.mat-option-text').contains('12', { timeout: 80000 }).click({ force: true })
    cy.get(el.SIMULACAO.SEMINOVO_GARANTIDO_COMPLETO_CHASSI, { timeout: 70000 }).type('6gy AHA4Be CS d98562')
      .type('{enter}')
    //   cy.get(el.SIMULACAO.CHECK_SEMINOVO_GARANTIDO_REDUZIDO, { timeout: 70000 }).click({force:true})
    // cy.get(el.SIMULACAO.SEMINOVO_GARANTIDO_REDUZIDO_KM).type('90.000' , {force:true})
    //.should('have.value', '90.000')
    // cy.get(el.SIMULACAO.SEMINOVO_GARANTIDO_REDUZIDO_CHASSI, { timeout: 70000 }).type('6gy AHA4Be CS d98562')
    //   .type('{enter}')
    cy.wait(5000)
    cy.get(el.SIMULACAO.BTN_CONTRATAR_SEGUROS).contains('Contratar').should('be.visible')
      .click({ force: true })

    cy.get(el.SIMULACAO.BUTTON_CONTRATAR_SIMULACAO_1, { timeout: 80000 }).should('be.visible').click({ force: true })
    cy.wait(5000)


    cy.get('.col-lg-5 > .row > :nth-child(1) > .info > strong').should('contain', name)//cliente
    cy.get('.col-lg-5 > .row > :nth-child(3) > .info > strong').should('contain', '10/01/1990')
    cy.get('.col-lg-5 > .row > :nth-child(4) > .info > strong').should('contain', '70713-000')
    cy.get('.col-lg-5 > .row > :nth-child(5) > .info > strong').should('contain', 'DF')
    cy.get('.col-lg-4 > .info-title').should('contain', 'RENAULT Kwid KWID OUTSIDER 1.0 Flex 12V 5p Mec.')
    cy.get('.col-lg-4 > .row > :nth-child(1) > .info > strong').should('contain', '2021')
    cy.get('.col-lg-4 > .row > :nth-child(2) > .info > strong').should('contain', '2022')

    cy.get(el.SIMULACAO.BUTTON_CONTINUAR_SIMULACAO).should('be.visible').click({ force: true })

    cy.wait(5000)

    //dados Pessoais
    cy.get(el.FICHA_CLIENTE.DADOS_PESSOAIS, { timeout: 80000 })
      .click({ force: true })

    //Telefone Dados Pessoais
    cy.get(el.FICHA_CLIENTE.DP_TELEFONEC)
      .type('(61) 992685019').should('have.value', '(61) 9 9268-5019')


    cy.get(el.FICHA_CLIENTE.SEXO_FEMININO).should('be.visible').click()
    //combo Estado civil
    cy.get(el.FICHA_CLIENTE.ESTADO_CIVIL).click()
    cy.get('.mat-option-text').contains('SOLTEIRO', { timeout: 80000 }).click({ force: true })
    cy.get(el.FICHA_CLIENTE.ESTADO_CIVIL, { timeout: 80000 }).should('contain', 'SOLTEIRO')

    //Combo Nacionalidade
    cy.get(el.FICHA_CLIENTE.DP_COMBONACIO, { timeout: 70000 }).click()
    cy.get('.mat-option-text').contains('Brasil', { timeout: 80000 }).click({ force: true })
    cy.get(el.FICHA_CLIENTE.DP_COMBONACIO, { timeout: 80000 }).should('contain', 'Brasil')
    //ComboUF
    cy.get(el.FICHA_CLIENTE.DP_COMBOUF, { timeout: 70000 }).type('ALAGOAS')
    cy.xpath('/html/body/div[2]/div[2]/div/div/div/mat-option[3]').click({ force: true })
    cy.wait(1000)

    cy.get(el.FICHA_CLIENTE.DP_NATURALIDADE, { timeout: 70000 }).click({ force: true })
    cy.get('.mat-option-text').contains('ARAPIRACA', { timeout: 80000 }).click({ force: true })
    cy.get(el.FICHA_CLIENTE.DP_NATURALIDADE,{ timeout: 80000 }).should('contain', 'ARAPIRACA')
    cy.wait(1000)

    //Documentos
    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.DOCUMENTOS, { timeout: 70000 }).should('be.visible').click({ force: true })
    cy.wait(3000)

    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.DP_DOCUMENTOS_CARTEIRA_IDENTIDADE, { timeout: 70000 }).should('be.visible').trigger('mouseover')
      .click({ force: true })

    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.NRG, { timeout: 70000 })//rg
      .click({ force: true })
      .type('2832346').should('have.value', '2832346')

    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.COMBOPAISDOC)
      .click({ force: true })// pais do documento
    cy.get('.mat-option-text').contains('Brasil', { timeout: 80000 }).click({ force: true })// pais do documento
    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.COMBOPAISDOC).should('contain', 'Brasil')
    cy.wait(1000)

    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.UF_DOC, { timeout: 70000 })
      .click()// uf  do documento
      .click({ force: true })// pais do documento
    cy.get('.mat-option-text').contains('AMAZONAS', { timeout: 80000 }).click({ force: true })

    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.DTEMISSAO)//data emissão
      .type('16/09/2000')
      .type('{Esc}')
      cy.get(el.FICHA_CLIENTE_DOCUMENTOS.DTEMISSAO).should('have.value','16/09/2000')

    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.ORGAOEMISSOR, { timeout: 70000 })//orgãoEmissor
      .click()
    cy.get('.mat-option-text').contains('SECRETARIA DE SEGURANCA PUBLICA', { timeout: 80000 }).click({ force: true })//orgãoEmissor 
    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.ORGAOEMISSOR, { timeout: 70000 }).should('have.text' , 'SECRETARIA DE SEGURANCA PUBLICA')

    //Dados Residenciais
    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.NOME_MAE, { timeout: 70000 }).type('Marta Lima Pereira')
    cy.get(el.FICHA_CLIENTE_DOCUMENTOS.PESSOA_POLITICAEX, { timeout: 70000 }).should('be.visible').click()

    cy.contains(el.FICHA_CLIENTE_RESIDENCIAIS.DADOS_RESIDENCIAIS).click()
    cy.get(el.FICHA_CLIENTE_RESIDENCIAIS.NUMERO, { timeout: 70000 }).should('be.visible').type('125')
    cy.get(el.FICHA_CLIENTE_RESIDENCIAIS.NUMERO, { timeout: 70000 }).should('have.value', '125')

    cy.wait(4000)
    //Dados Profissionais
    cy.get(el.FICHA_DADOS_PROFISSIONAIS.DADOS_PROFISSIONAIS, { timeout: 70000 }).should('be.visible').click({ force: true })

    cy.get(el.FICHA_DADOS_PROFISSIONAIS.NOME_EMPRESA, { timeout: 70000 }).type('Camargo Brito SAF', { force: true })//nome da empresa
    // pais do documento
    cy.get(el.FICHA_DADOS_PROFISSIONAIS.OCUPACAO)
      .click({ force: true })
    cy.get('.mat-option-text').contains('ASSALARIADO', { timeout: 80000 }).click({ force: true })//

    cy.get(el.FICHA_DADOS_PROFISSIONAIS.CARGO, { timeout: 70000 }).click({ force: true })
    cy.get('.mat-option-text').contains('ADMINISTRADOR').click({ force: true })
    cy.get(el.FICHA_DADOS_PROFISSIONAIS.CARGO, { timeout: 80000 }).should('contain', 'ADMINISTRADOR')
   
    cy.get(el.FICHA_DADOS_PROFISSIONAIS.PATRIMONIO, { timeout: 70000 }).type('8000000', { force: true })//CampPatrimonio
    cy.get(el.FICHA_DADOS_PROFISSIONAIS.RENDAM, { timeout: 70000 }).type('1500000', { force: true })//Renda Mensal
    cy.get(el.FICHA_DADOS_PROFISSIONAIS.OVALORES, { timeout: 70000 }).type('900000', { force: true })//outros valores

    //  cy.get(el.FICHA_DADOS_PROFISSIONAIS.TELCOMERCIAL, { timeout: 80000 }).type('62 36290102', { force: true })
    cy.get('[data-testid="employerBusinessPhone"]', { timeout: 80000 }).type('62 36290102', { force: true })

    cy.contains(el.FICHA_DADOS_VEICULO.DADOS, { timeout: 80000 })
      .click({ force: true })//Aba dados do Veiculo
    cy.get(el.FICHA_DADOS_VEICULO.CHASSI, { timeout: 80000 }).should('be.visible').type('6gy AHA4Be CS d98562', { force: true })
    cy.get(el.FICHA_DADOS_VEICULO.PLACA, { timeout: 80000 }).should('be.visible').type('JKK 0529', { force: true })

    cy.wait(3000)
    //  Estado de licenciamento
    cy.get(el.FICHA_DADOS_VEICULO.ESTADO_LICEN, { timeout: 80000 }).should('be.visible').click({ force: true })
    cy.get('.mat-option-text').contains('ACRE', { timeout: 80000 }).click({ force: true })
    //cor
    cy.get(el.FICHA_DADOS_VEICULO.COR, { timeout: 80000 }).should('be.visible').click({ force: true })
    cy.get('.mat-option-text').contains('Bege', { timeout: 80000 }).click({ force: true })
    //Kilometragem
    cy.get(el.FICHA_DADOS_VEICULO.KM, { timeout: 80000 }).should('be.visible').type('90000', { force: true })
    //Renavam
    cy.get(el.FICHA_DADOS_VEICULO.RENAVAM, { timeout: 80000 }).type('37155872353', { force: true })
    cy.wait(5000)

    //Tipo de combustivel
    cy.get(el.FICHA_DADOS_VEICULO.TPCOMBUSTIVEL, { timeout: 80000 }).trigger('mouseover').click({ force: true })
    //opcionais
    cy.get(el.FICHA_DADOS_VEICULO.RADIO, { timeout: 80000 }).trigger('mouseover').click({ force: true })
    cy.get(el.FICHA_DADOS_VEICULO.KIT_MULT, { timeout: 80000 }).trigger('mouseover').click({ force: true })
    cy.get(el.FICHA_DADOS_VEICULO.VIDRO_ELETRICO, { timeout: 80000 }).trigger('mouseover').click({ force: true })
    cy.get(el.FICHA_DADOS_VEICULO.ARCONDICIONADO, { timeout: 80000 }).trigger('mouseover').click({ force: true })
    //Funilaria e Pintura
    cy.get(el.FICHA_DADOS_VEICULO.FUNILARIA).should('be.visible').click()
    // cy.get('#mat-radio-26-input', { timeout: 80000 }).trigger('mouseover').click({ force: true })
    cy.get(el.FICHA_DADOS_VEICULO.PNEUS).should('be.visible').trigger('mouseover').click({ force: true })//pneus
    cy.get(el.FICHA_DADOS_VEICULO.ESTOFAMENTO).should('be.visible').trigger('mouseover').click({ force: true })//Estofamento/Forração
    cy.get(el.FICHA_DADOS_VEICULO.FAROIS).should('be.visible').trigger('mouseover').click({ force: true })//farios
    cy.wait(3000)

    cy.get('button[data-testid="proposal-register_button-register"]', { timeout: 70000 }).should('be.visible').click({ force: true })
    cy.get('#mat-dialog-3', { timeout: 80000 }).click({ force: true })
    cy.wait(5000)
    cy.get(".mat-button-wrapper").contains('Sim').click({ force: true })

    cy.get(el.RESULTADO_SIMULACAO.CAMPO_NOME, { timeout: 80000 }).should('contain', name)
    cy.get(el.RESULTADO_SIMULACAO.TIPO_CLIENTE, { timeout: 80000 }).should('contain', 'Pessoa Física')
    cy.get(el.RESULTADO_SIMULACAO.TIPO_VENDA, { timeout: 80000 }).should('contain', 'Usado')
    cy.get(el.RESULTADO_SIMULACAO.INSECAO, { timeout: 80000 }).should('contain', 'Não isento')
    cy.get(el.RESULTADO_SIMULACAO.ESTADO, { timeout: 80000 }).should('contain', 'DF')
    cy.get(el.RESULTADO_SIMULACAO.VEICULO, { timeout: 80000 }).should('contain', 'RENAULT Kwid KWID OUTSIDER 1.0 Flex 12V 5p Mec.')
    cy.get(el.RESULTADO_SIMULACAO.ANO_FABRICACAO, { timeout: 80000 }).should('contain', '2021')
    cy.get(el.RESULTADO_SIMULACAO.ANO_MODELO, { timeout: 80000 }).should('contain', '2022')
    cy.get(el.RESULTADO_SIMULACAO.TIPO, { timeout: 80000 }).should('contain', 'Particular')
    cy.get(el.RESULTADO_SIMULACAO.VALOR_VEICULO, { timeout: 80000 }).should('contain', '49.990,00')
    cy.wait(3000)

  })

})





























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































